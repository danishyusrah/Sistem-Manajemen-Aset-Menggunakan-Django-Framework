-- Tabel Users
create table users (
    id uuid primary key default gen_random_uuid(),
    email text unique not null,
    password text not null,
    full_name text,
    role text check (role in ('admin', 'staff', 'user')) default 'user',
    created_at timestamp default now()
);

-- Tabel CRUD Data (contoh: posts)
create table posts (
    id uuid primary key default gen_random_uuid(),
    title text not null,
    content text,
    user_id uuid references users(id) on delete cascade,
    created_at timestamp default now()
);

-- Supabase policies (biar bisa diakses via API)

-- Public select untuk testing
-- Ganti sesuai kebutuhan untuk proteksi real
-- Users
create policy "Allow read access to users" on users
    for select using (true);

-- Posts
create policy "Allow all access to posts" on posts
    for all using (true);
